<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>2&nbsp; Data – An Introduction to Quantitative Text Analysis for Linguistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../part_2/3_analysis.html" rel="next">
<link href="../part_2/index.html" rel="prev">
<link href="../assets/images/logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://hypothes.is/embed.js"></script><script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script><script data-goatcounter="https://italicize.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script><link rel="stylesheet" href="../assets/css/mini.css">
<meta property="og:title" content="2&nbsp; Data – An Introduction to Quantitative Text Analysis for Linguistics">
<meta property="og:description" content="">
<meta property="og:site_name" content="An Introduction to Quantitative Text Analysis for Linguistics">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title"><span id="sec-data-chapter" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">An Introduction to Quantitative Text Analysis for Linguistics</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/qtalr/book" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_0/preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part_1/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Orientation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_1/1_text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Text analysis</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part_2/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_2/2_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_2/3_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_2/4_research.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Research</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part_3/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preparation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_3/5_acquire.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Acquire</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_3/6_curate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Curate</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_3/7_transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Transform</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part_4/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_4/8_explore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Explore</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_4/9_predict.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Predict</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_4/10_infer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Infer</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part_5/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Communication</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part_5/11_contribute.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Contribute</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li>
<a href="#sec-data-data" id="toc-sec-data-data" class="nav-link active" data-scroll-target="#sec-data-data"><span class="header-section-number">2.1</span> Data</a>
  <ul class="collapse">
<li><a href="#populations-and-samples" id="toc-populations-and-samples" class="nav-link" data-scroll-target="#populations-and-samples">Populations and samples</a></li>
  <li><a href="#corpora" id="toc-corpora" class="nav-link" data-scroll-target="#corpora">Corpora</a></li>
  <li><a href="#other-considerations" id="toc-other-considerations" class="nav-link" data-scroll-target="#other-considerations">Other considerations</a></li>
  <li><a href="#access" id="toc-access" class="nav-link" data-scroll-target="#access">Access</a></li>
  </ul>
</li>
  <li>
<a href="#information" id="toc-information" class="nav-link" data-scroll-target="#information"><span class="header-section-number">2.2</span> Information</a>
  <ul class="collapse">
<li><a href="#sec-data-organization" id="toc-sec-data-organization" class="nav-link" data-scroll-target="#sec-data-organization">Organization</a></li>
  <li><a href="#sec-data-transformation" id="toc-sec-data-transformation" class="nav-link" data-scroll-target="#sec-data-transformation">Transformation</a></li>
  </ul>
</li>
  <li>
<a href="#sec-data-documentation" id="toc-sec-data-documentation" class="nav-link" data-scroll-target="#sec-data-documentation"><span class="header-section-number">2.3</span> Documentation</a>
  <ul class="collapse">
<li><a href="#sec-data-data-origin" id="toc-sec-data-data-origin" class="nav-link" data-scroll-target="#sec-data-data-origin">Data origin</a></li>
  <li><a href="#sec-data-data-dictionaries" id="toc-sec-data-data-dictionaries" class="nav-link" data-scroll-target="#sec-data-data-dictionaries">Data dictionaries</a></li>
  </ul>
</li>
  <li><a href="#activities" id="toc-activities" class="nav-link" data-scroll-target="#activities">Activities</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/qtalr/book/blob/main/part_2/2_data.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/qtalr/book/edit/main/part_2/2_data.qmd" target="_blank" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/qtalr/book/issues" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title d-none d-lg-block"><span id="sec-data-chapter" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><!-- From Data to Information: Curating and Transforming Datasets for Text Analysis --><div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-list-alt" aria-label="list-alt"></i> Outcomes</strong></p>
<ul>
<li>Describe the difference between data and information.</li>
<li>Understand how the tidy approach to data organization can enhance the quality and usability of data.</li>
<li>Articulate the importance of documentation in promoting reproducible research.</li>
</ul>
</div>
</div>
</div>
<p>In this chapter, I lay the groundwork for deriving insights from text analysis by focusing on content and structure of data and information. The concepts of populations and samples are introduced, highlighting their similarities and key differences. Connecting these topics to text analysis, language samples, or corpora, are explored, discussing their types, sources, formats, and ethical considerations. Subsequently, I highlight key concepts in creating information from corpus data, such as organization and transformation. Documentation in quantitative research is emphasized addressing the importance of data origin files and data dictionaries.</p>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-solid fa-terminal" aria-label="terminal"></i> Lessons</strong></p>
<p><strong>What</strong>: Objects, Packages and functions<br><strong>How</strong>: In an R console, load {swirl}, run <code>swirl()</code>, and follow prompts to select the lesson.<br><strong>Why</strong>: To introduce you to the main types of objects in R and to understand the role and use of functions and packages in R programming.</p>
</div>
</div>
</div>
<section id="sec-data-data" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="sec-data-data">
<span class="header-section-number">2.1</span> Data</h2>
<p>Data is data, right? The term ‘data’ is so common in popular vernacular it is easy to assume we know what we mean when we say ‘data’. But as in most things in science, where there are common assumptions there are important details that require more careful consideration. Let’s turn to the first key distinction that we need to make to start to break down the term ‘data’: the difference between populations and samples.</p>
<section id="populations-and-samples" class="level3"><h3 class="anchored" data-anchor-id="populations-and-samples">Populations and samples</h3>
<p>The first thing that comes to many people’s mind when the term population is used is human populations (derived from Latin ‘populus’). Say for example we pose the question —What’s the population of Milwaukee? When we speak of a population in these terms we are talking about the total sum of individuals living within the geographical boundaries of Milwaukee. In concrete terms, a <strong>population</strong> is an idealized set of objects or events in reality which share a common characteristic or belong to a specific category. The term to highlight here is idealized. Although we can look up the US Census report for Milwaukee and retrieve a figure for the population, this cannot truly be the population. Why is that? Well, whatever method that was used to derive this numerical figure was surely incomplete. If not incomplete, by the time someone recorded the figure some number of residents of Milwaukee moved out, moved in, were born, or passed away. In either case, this example serves to point out that populations are not fixed and are subject to change over time.</p>
<p>Likewise when we talk about populations in terms of language we are dealing with an idealized aspect of linguistic reality. Let’s take the words of the English language as an analog to our previous example population. In this case the words are the people and English is the grouping characteristic. Just as people, words move out, move in, are born, and pass away. Any compendium of the words of English at any moment is almost instantaneously incomplete. This is true for all populations, save those relatively rare cases in which the grouping characteristics select a narrow slice of reality which is objectively measurable and whose membership is fixed (the complete works of Shakespeare, for example).</p>
<p>Therefore, (most) populations are amorphous moving targets. We subjectively hold them to exist, but in practical terms we often cannot nail down the specifics of populations. So how do researchers go about studying populations if they are theoretically impossible to access directly? The strategy employed is called sampling.</p>
<p>A <strong>sample</strong> is the product of a subjective process of selecting a finite set of observations from an idealized population with the goal of capturing the relevant characteristics of this population. When we talk about data in data science, we are talking about samples.</p>
<p>Whether selecting a sample for your research or evaluating a sample used in someone else’s research, there are two key characteristics to consider: the sampling frame and the representativeness. The <strong>sampling frame</strong> is the set of characteristics that define the population of interest. The <strong>representativeness</strong> is the degree to which the sample reflects the characteristics of the population. Both of these concern bias, albeit in different ways. By defining the population, a sampling frame sets the boundaries of the population and therefore the scope of research based on the sample. This bias is not a bad thing, in fact, the more clearly defined the sampling frame the better. Low representativeness, on the other hand, is a type of bias we would like to avoid. Given the nature of samples, perfect representativeness is not achievable. That said, there are a series of sampling strategies that tend to increase the representativeness of a sample, seen in <a href="#tbl-sampling-strategies" class="quarto-xref">Table&nbsp;<span>2.1</span></a>.</p>
<div id="tbl-sampling-strategies" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[15, 85]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-sampling-strategies-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.1: Sampling strategies to increase representativeness
</figcaption><div aria-describedby="tbl-sampling-strategies-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 85%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Strategy</th>
<th style="text-align: left;">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Size</td>
<td style="text-align: left;">Larger samples increase the likelihood of representing the population</td>
</tr>
<tr class="even">
<td style="text-align: left;">Randomized</td>
<td style="text-align: left;">Avoid inadvertently including bias in selection</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Stratified</td>
<td style="text-align: left;">Divide the population into sub-populations, ‘strata’, and sample from each</td>
</tr>
<tr class="even">
<td style="text-align: left;">Balanced</td>
<td style="text-align: left;">Ensure that the relative size of the strata is reflected in the sample</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Together, large randomly selected and balanced stratified samples set the benchmark for sampling. However, hitting this ideal is not always feasible. There are situations where larger samples are not accessible. Alternatively, there may be instances where the population or its strata are not well understood. In such scenarios, researchers have to work with the most suitable sample they can obtain given the limitations of their research project.</p>
</section><section id="corpora" class="level3"><h3 class="anchored" data-anchor-id="corpora">Corpora</h3>
<p>A sample, as just defined, of a language population is called a <strong>corpus</strong> (<em>pl.</em> corpora) . Corpora are often classified into various types. These types reflect general characteristics of the scope of the corpus sampling frame. The most common types of corpora appear in <a href="#tbl-corpus-types" class="quarto-xref">Table&nbsp;<span>2.2</span></a>.</p>
<div id="tbl-corpus-types" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[15, 85]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-corpus-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.2: Types of corpora
</figcaption><div aria-describedby="tbl-corpus-types-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 85%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Sampling Scope</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Reference</td>
<td style="text-align: left;">General characteristics of a language population</td>
</tr>
<tr class="even">
<td style="text-align: left;">Specialized</td>
<td style="text-align: left;">Specific populations, <em>e.g.</em> spoken language, academic writing, <em>etc.</em>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Parallel</td>
<td style="text-align: left;">Directly comparable texts in different languages (<em>i.e.</em> translations)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Comparable</td>
<td style="text-align: left;">Indirectly comparable texts in different languages or language varieties (<em>i.e.</em> similar sampling frames)</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Of the corpus types, <strong>reference corpora</strong> are the least common and most ambitious. These resources aim to model the characteristics of a language population. <strong>Specialized corpora</strong> aim to represent more specific populations. What specialized corpora lack in breadth of coverage, they make up for in depth of coverage by providing a more targeted representation of specific language populations. <strong>Parallel</strong> and <strong>comparable corpora</strong> are both types of specialized corpora which aim to model different languages or different language varieties for direct or indirect comparison, respectively.</p>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-lightbulb" aria-label="lightbulb"></i> Consider this</strong></p>
<!-- [ ] add alt description -->
<p><img src="figures/fig-brown-corpus.png" width="40%" style="float: right;"></p>
<p>The ‘Standard Sample of Present-Day American English’ (known commonly as the Brown Corpus) is widely recognized as one of the first large, machine-readable corpora. Compiled by <span class="citation" data-cites="Kucera1967">Kucera &amp; Francis (<a href="../references.html#ref-Kucera1967" role="doc-biblioref">1967</a>)</span>, the corpus is comprised of 1,014,312 words from edited English prose published in the United States in 1961.</p>
<p>Given the sampling frame and the strata and balance for this corpus visualized in this plot, can you determine what language population this corpus aims to represent? What types of research might this corpus support or not support?</p>
</div>
</div>
</div>
<p>In text analysis, corpora are the raw materials of research. The aim of the quantitative text researcher is to select the corpus, or corpora, which best align with the purpose of the research. For example, a reference corpus such as the American National Corpus <span class="citation" data-cites="Ide2001">(<a href="../references.html#ref-Ide2001" role="doc-biblioref">Ide &amp; Macleod, 2001</a>)</span> may be better suited to address a question dealing with the way American English works, but this general resource may lack detail in certain areas, such as medical language, that may be vital for a research project aimed at understanding changes in medical terminology. Furthermore, a researcher studying spoken language might collect a corpus of transcribed conversations from a particular community or region, such as the Santa Barbara Corpus of Spoken American English <span class="citation" data-cites="DuBois2005">(<a href="../references.html#ref-DuBois2005" role="doc-biblioref">Du Bois et al., 2005</a>)</span>. While this would not include every possible spoken utterance produced by members of that group, it could be considered a representative sample of the population of speech in that context.</p>
</section><section id="other-considerations" class="level3"><h3 class="anchored" data-anchor-id="other-considerations">Other considerations</h3>
<p>In preparing and conducting research using corpora, the most primary concern is aligning research goals with the corpus resource. However, there are other, more practical, considerations to keep in mind.</p>
</section><section id="access" class="level3"><h3 class="anchored" data-anchor-id="access">Access</h3>
<p>Ensuring access, both in terms of physical access to the data and legal access to the data, should not be overlooked in the design and execution of a project. Simply put, without access to the data, research cannot proceed. It is better to consider access early in the research process to avoid delays and complications later on.</p>
<p>The medium to acquire corpus data most used in contemporary quantitative research is the internet. Although a general search query can lead you to corpus data, there are a few primary sources of corpora you should be aware of, summarized in <a href="#tbl-corpus-sources" class="quarto-xref">Table&nbsp;<span>2.3</span></a>.</p>
<div id="tbl-corpus-sources" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[25, 45, 30]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-corpus-sources-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.3: Sources of corpus data
</figcaption><div aria-describedby="tbl-corpus-sources-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 45%">
<col style="width: 30%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Source</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Examples</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Language repositories</td>
<td style="text-align: left;">Repositories that specialize in language data</td>
<td style="text-align: left;">
<a href="https://www.ldc.upenn.edu/">Language Data Consortium</a>, <a href="https://talkbank.org/">TalkBank</a>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data sharing platforms</td>
<td style="text-align: left;">Platforms that enable researchers to securely store, manage, and share data</td>
<td style="text-align: left;">
<a href="https://github.com/">GitHub</a>, <a href="https://zenodo.org/">Zenodo</a>, <a href="https://osf.io/">Open Science Framework</a>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Developed corpora</td>
<td style="text-align: left;">Corpora prepared by researchers for research purposes</td>
<td style="text-align: left;">
<a href="https://ropensci.org/packages/data-access/">APIs</a>, web scraping</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p> </p>
<p>It is always advisable to start looking for data in a <strong>language repository</strong>. The advantage of beginning your data search in repositories is that a repository, especially those geared towards the linguistic community, will make identifying language corpora faster than through a general web search . Furthermore, repositories often require certain standards for corpus format and documentation for publication.</p>
<div class="halfsize callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-lightbulb" aria-label="lightbulb"></i> Consider this</strong></p>
<p>Explore some of the resources listed on the Resources Kit “Identifying data and data sources” guide and consider their sampling frames. Can you think of a research question or questions that this resource may be well-suited to support? What types of questions would be less-than-adequate for a given resource?</p>
</div>
</div>
</div>
<p>As part of a general movement towards reproducibility, more corpora are available on <strong>data sharing platforms</strong>. These platforms enable researchers to securely store, manage, and share data with others. Support is provided for various types of data, including documents and code, and as such they are a good place to look as they often include reproducible research projects as well.</p>
<p>Finally, if satisfactory data cannot be found in a repository or data sharing platform, researchers may need to develop their own corpus. There are two primary ways to attain language data from the web. The first is through an <strong>application programming interface</strong> (API). APIs are, as the title suggests, programming interfaces which allow access, under certain conditions, to information that a website or database accessible via the web contains.</p>
<div class="halfsize callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-solid fa-medal" aria-label="medal"></i> Dive deeper</strong></p>
<p>The process of corpus development is a topic in and of itself. For a more in-depth discussion of the process, see <span class="citation" data-cites="Adel2020">Ädel (<a href="../references.html#ref-Adel2020" role="doc-biblioref">2020</a>)</span>.</p>
</div>
</div>
</div>
<p>The second, more involved, way to acquire data from the web is through the process of web scraping. <strong>Web scraping</strong> is the process of harvesting data from the public-facing web. Language texts may be found on sites as uploaded files, such as PDF or DOCX (Word) documents, or found displayed as the primary text of a site. Given the wide variety of documents uploaded and language behavior recorded daily on news sites, blogs and the like, compiling a corpus has never been easier. Having said that, how the data is structured and how much data needs to be retrieved can pose practical obstacles to collecting data from the web, particularly if the approach is to acquire the data manually instead of automating the task.</p>
<p>Beyond physical access to the data, legal access is also a consideration. Just because data is available on the web does not mean it is free to use. Repositories, APIs, and individual data resources often have <strong>licensing agreements</strong> and <strong>terms of use</strong>, ranging from public domain to proprietary licenses. Respecting intellectual property rights is crucial when working with corpus data. Violating these rights can lead to legal and ethical issues, including lawsuits, fines, and damage to one’s professional reputation. To avoid these problems, researchers must ensure they have the necessary permissions to use copyrighted works in their research. Consult the copyright office in your country and/or an academic librarian for guidance on copyright law and fair use as it pertains to your use case.</p>
<section id="formats" class="level4"><h4 class="anchored" data-anchor-id="formats">Formats</h4>
<p>Whether you are using a published corpus or developing your own, it is important to understand how the data you want to work with is formatted so you can ensure that you are prepared to conduct the subsequent processing steps. When referring to the format of a corpus, this includes the folder and file structure, the file types, and how file content is encoded electronically. Yet, the most important characteristic, especially for language-based data, is the internal structure of the files themselves. With this in mind let’s discuss the difference between unstructured, semi-structured, and structured data.</p>
<p>A corpus may include various types of linguistic (<em>e.g.</em> part of speech, syntactic structure, named entities, <em>etc.</em>) or non-linguistic (<em>e.g.</em> source, dates, speaker information, <em>etc.</em>) attributes. These attributes are known as <strong>metadata</strong>, or data about data. As a general rule, files which include more metadata tend to be more internally structured. Internal file structure refers to the degree to which the content has been formatted such that these pieces of information are easy to query and analyze by a computer. Let’s review characteristics of the three main types of file structure types and associate common file extensions that files in each have.</p>
<p><strong>Unstructured data</strong> is data which does not have a machine-readable internal structure. This is the case for plain text files (<em>.txt</em>), which are simply a sequence of characters. For example, in <a href="#def-masc-text" class="quarto-xref">Snippet&nbsp;<span>2.1</span></a> we see a plain text file from the Manually Annotated Sub-Corpus of American English (MASC)<span class="citation" data-cites="Ide2008">(<a href="../references.html#ref-Ide2008" role="doc-biblioref">Ide, Baker, Fellbaum, Fillmore, &amp; Passonneau, 2008</a>)</span>:</p>
<div id="def-masc-text" class="theorem definition">
<p><span class="theorem-title"><strong>Snippet 2.1</strong></span> MASC <em>.txt</em> file</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Sound is a vibration. Sound travels as a mechanical wave through a medium, and in space, there is no medium. So when my shuttle malfunctioned and the airlocks didn't keep the air in, I heard nothing.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Other examples of files which often contain unstructured data include <em>.pdf</em> and <em>.docx</em> files. While these file types may contain data which appears structured to the human eye, the structure is not designed to be machine-readable. As such the data would typically be read into R as a vector of <strong>character strings</strong>. It is possible to perform only the most rudimentary queries on this type of data, such as string matches. For anything more informative, it is necessary to further process this data, as we will see in <a href="#sec-data-organization" class="quarto-xref">Sections&nbsp;<span>2.2.1</span></a> and <a href="#sec-data-transformation" class="quarto-xref"><span>2.2.2</span></a>.</p>
<p>On the other end of the spectrum, <strong>structured data</strong> is data which conforms to a tabular format in which elements in tables and relationships between tables are defined. This makes querying and analyzing easy and efficient. Relational databases (<em>e.g.</em> MySQL, PostgreSQL, <em>etc</em>.) are designed to store and query structured data. The data frame object in R is also a structured data format. In each case, the data is stored in a tabular format in which each row represents a single observation and each column represents a single attribute whose values are of the same type.</p>
<p>In <a href="#def-masc-df" class="quarto-xref">Snippet&nbsp;<span>2.2</span></a> we see an example of an R data frame object which overlaps with the language in the plain text file in <a href="#def-masc-text" class="quarto-xref">Snippet&nbsp;<span>2.1</span></a>:</p>
<div id="def-masc-df" class="theorem definition">
<p><span class="theorem-title"><strong>Snippet 2.2</strong></span> MASC R data frame</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>   doc_id  date modality token_id word       lemma      pos</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">int</span>&gt; &lt;<span class="kw">dbl</span>&gt; &lt;<span class="kw">fct</span>&gt;       &lt;<span class="kw">int</span>&gt; &lt;<span class="kw">chr</span>&gt;      &lt;<span class="kw">chr</span>&gt;      &lt;<span class="kw">chr</span>&gt;</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> 1      1  2008 Writing         1 Sound      sound      NNP</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a> 2      1  2008 Writing         2 is         be         VBZ</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a> 3      1  2008 Writing         3 a          a          DT</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a> 4      1  2008 Writing         4 vibration  vibration  NN</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a> 5      1  2008 Writing         5 .          .          .</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a> 6      1  2008 Writing         6 Sound      sound      NNP</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a> 7      1  2008 Writing         7 travels    travel     VBZ</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a> 8      1  2008 Writing         8 as         as         IN</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a> 9      1  2008 Writing         9 a          a          DT</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>10      1  2008 Writing        10 mechanical mechanical JJ</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we see that the data is stored in a tabular format with each row representing a single observation (<code>word</code>) and each column representing a single attribute. This tabular structure supports the increased number of metadata attributes. Internally, R applies a schema to ensure the values in each column are of the same type (<em>e.g.</em> <code>&lt;chr&gt;</code>, <code>&lt;dbl&gt;</code>, <code>&lt;fct&gt;</code>, <em>etc.</em>). This structured format is designed to be easy to query and analyze and as such is the primary format for data analysis in R.</p>
<p><strong>Semi-structured data</strong> data falls between unstructured and structured data. This covers a wide range of file structuring approaches. For example, an otherwise plain text file with part-of-speech tags appended to each word is minimally structured, <a href="#def-masc-pos" class="quarto-xref">Snippet&nbsp;<span>2.3</span></a>.</p>
<div id="def-masc-pos" class="theorem definition">
<p><span class="theorem-title"><strong>Snippet 2.3</strong></span> MASC <em>.txt</em> file with part-of-speech tags</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Sound/NNP is/VBZ a/DT vibration/NN ./. Sound/NNP travels/VBZ as/IN a/DT mechanical/JJ wave/NN through/IN a/DT medium/NN ,/, and/CC in/IN space/NN ,/, there/EX is/VBZ no/DT medium/NN ./. So/RB when/WRB my/PRP$ shuttle/NN malfunctioned/JJ and/CC the/DT airlocks/NNS did/VBD n't/RB keep/VB the/DT air/NN in/IN ,/, I/PRP heard/VBD nothing/NN ./.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Towards the more structured end of semi-structured data, many file formats including <em>.xml</em> and <em>.json</em> contain hierarchical data. For example, in <a href="#def-masc-xml" class="quarto-xref">Snippet&nbsp;<span>2.4</span></a> shows a snippet from a <em>.xml</em> file from the MASC corpus.<br></p>
<div id="def-masc-xml" class="theorem definition">
<p><span class="theorem-title"><strong>Snippet 2.4</strong></span> MASC <em>.xml</em> file</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">a</span><span class="ot"> xml:id=</span><span class="st">"penn-N264215"</span><span class="ot"> label=</span><span class="st">"tok"</span><span class="ot"> ref=</span><span class="st">"penn-n7345"</span><span class="ot"> as=</span><span class="st">"anc"</span>&gt;</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">fs</span>&gt;</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">f</span><span class="ot"> name=</span><span class="st">"base"</span><span class="ot"> value=</span><span class="st">"sound"</span>/&gt;</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">f</span><span class="ot"> name=</span><span class="st">"msd"</span><span class="ot"> value=</span><span class="st">"NNP"</span>/&gt;</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">f</span><span class="ot"> name=</span><span class="st">"string"</span><span class="ot"> value=</span><span class="st">"Sound"</span>/&gt;</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">fs</span>&gt;</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">a</span>&gt;</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">node</span><span class="ot"> xml:id=</span><span class="st">"penn-n7346"</span>&gt;</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">link</span><span class="ot"> targets=</span><span class="st">"seg-r13152"</span>/&gt;</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">node</span>&gt;</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">a</span><span class="ot"> xml:id=</span><span class="st">"penn-N264243"</span><span class="ot"> label=</span><span class="st">"tok"</span><span class="ot"> ref=</span><span class="st">"penn-n7346"</span><span class="ot"> as=</span><span class="st">"anc"</span>&gt;</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">fs</span>&gt;</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">f</span><span class="ot"> name=</span><span class="st">"string"</span><span class="ot"> value=</span><span class="st">"is"</span>/&gt;</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">f</span><span class="ot"> name=</span><span class="st">"msd"</span><span class="ot"> value=</span><span class="st">"VBZ"</span>/&gt;</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">f</span><span class="ot"> name=</span><span class="st">"base"</span><span class="ot"> value=</span><span class="st">"be"</span>/&gt;</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  &lt;/<span class="kw">fs</span>&gt;</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">a</span>&gt;</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">node</span><span class="ot"> xml:id=</span><span class="st">"penn-n7347"</span>&gt;</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">link</span><span class="ot"> targets=</span><span class="st">"seg-r13154"</span>/&gt;</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">node</span>&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The format of semi-structured data is often influenced by characteristics of the data or reflect an author’s individual preferences. It is sometimes the case that data will be semi-structured in a less-standard format. For example, the Switchboard Dialog Act Corpus (SWDA) <span class="citation" data-cites="SWDA2008">(<a href="../references.html#ref-SWDA2008" role="doc-biblioref">University of Colorado Boulder, 2008</a>)</span>, in <a href="#def-swda-utt" class="quarto-xref">Snippet&nbsp;<span>2.5</span></a>, includes a <em>.utt</em> file extension for files which contain utterances annotated with dialog act tags.</p>
<div style="page-break-after: always;"></div>
<div id="def-swda-utt" class="theorem definition">
<p><span class="theorem-title"><strong>Snippet 2.5</strong></span> SWDA <em>.utt</em> file</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>o      A.1 utt1: Okay. /</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>qw     A.1 utt2: {D So, }</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>qy^d   B.2 utt1: [ [ I guess, +</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>+      A.3 utt1: What kind of experience [ do you, + do you ] have, then with child care? /</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>+      B.4 utt1: I think, ] + {F uh, } I wonder ] if that worked. /</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>qy     A.5 utt1: Does it say something? /</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Whether standard or not, semi-structured data is often designed to be machine-readable. As with unstructured data, the ultimate goal is to convert the data into a structured format and augment the data where necessary to prepare it for a particular research analysis.</p>
</section></section></section><section id="information" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="information">
<span class="header-section-number">2.2</span> Information</h2>
<p>Identifying an adequate corpus resource, in terms of content, access, and formatting, for the target research question is the first step in moving a quantitative text research project forward. The next step is to select the components or characteristics of this resource that are relevant for the research and then move to organize the attributes of this data into a more informative format. This is the process of converting corpus data into a <strong>dataset</strong> —a tabular representation of particular attributes of the data as the basis for generating information. Once the data is represented as a dataset, it is often manipulated and transformed, adjusting and augmenting the data such that it better aligns with the research question and the target analytical approach.</p>
<section id="sec-data-organization" class="level3"><h3 class="anchored" data-anchor-id="sec-data-organization">Organization</h3>
<p>Data alone is not informative. Only through explicit organization of the data in a way that makes relationships and meaning explicit does data become information. In this form, our data is called a dataset. This is a particularly salient hurdle in text analysis research. Many textual sources are unstructured or semi-structured. This means relationships that will be used in the analysis have yet to be purposefully drawn and organized as a dataset.</p>
<section id="sec-data-tidy-data" class="level4"><h4 class="anchored" data-anchor-id="sec-data-tidy-data">Tidy Data</h4>
<p>The selection of the attributes from a corpus and the juxtaposition of these attributes in a relational format, or dataset, that converts data into information is known as <strong>data curation</strong>. The process of data curation minimally involves deriving a base dataset, or <em>curated dataset</em>, which establishes the main informational associations according to the philosophical approach outlined by <span class="citation" data-cites="Wickham2014a">Wickham (<a href="../references.html#ref-Wickham2014a" role="doc-biblioref">2014</a>)</span>.</p>
<p>In this work, a <strong>tidy dataset</strong> refers both to the structural (physical) and informational (semantic) organization of the dataset. Physically, a tidy dataset is a tabular data structure, illustrated in <a href="#fig-data-tidy-format-image" class="quarto-xref">Figure&nbsp;<span>2.1</span></a>, where each <em>row</em> is an <strong>observation</strong> and each <em>column</em> is a <strong>variable</strong> that contains measures of a feature or attribute of each observation. Each <em>cell</em> where a given row-column intersect contains a <strong>value</strong> which is a particular attribute of a particular observation for the particular observation-feature pair also known as a <em>data point</em>.</p>
<div id="fig-data-tidy-format-image" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-data-tidy-format-image-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<p><span data-fig-alt="A visualization of a table where the row are marked as 'observations' and the columns are marked as 'variables' with each cell containing a 'value' that is a particular attribute of a particular observation for the particular observation-feature pair."><img src="figures/data-tidy.drawio.png" class="img-fluid figure-img" style="width:85.0%"></span></p>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-tidy-format-image-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.1: Visual summary of the tidy dataset format
</figcaption></figure>
</div>
<p>In terms of semantics, columns and rows both contribute to the informational value of the dataset. Let’s start with columns. In a tidy dataset, each column is a variable, an attribute that can take on a number of values. Although variables vary in terms of values, they do not in type. A variable is of one and only one informational type. Statistically speaking, informational types are defined as <strong>levels of measurement</strong>, a classification system used to semantically distinguish between types of variables. There are four levels (or types) in this system: nominal, ordinal, interval, and ratio.</p>
<p>In practice, however, text analysis researchers often group these levels into three main informational types: categorical, ordinal, and numeric <span class="citation" data-cites="Gries2021a">(<a href="../references.html#ref-Gries2021a" role="doc-biblioref">Gries, 2021</a>)</span>. What do these informational types represent? <strong>Categorical data</strong> is for labeled data or classes that answer the question “what?” <strong>Ordinal data</strong> is categorical data with rank order that answers the question “what order?” <strong>Numeric data</strong> is ordinal data with equal intervals between values that answers the question “how much or how many?”</p>
<p>Let’s look at an example of a tidy dataset. Using the criteria just described, let’s see if we can identify the informational values (categorical, ordinal, or numeric) of the variables that appear in a snippet from the MASC corpus in dataset form in <a href="#tbl-data-info-values-masc" class="quarto-xref">Table&nbsp;<span>2.4</span></a>.</p>
<div class="cell" data-tbl-colwidths="[14,14,14,14,16,14,14]">
<div id="tbl-data-info-values-masc" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[14,14,14,14,16,14,14]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-info-values-masc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.4: MASC dataset variables
</figcaption><div aria-describedby="tbl-data-info-values-masc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 16%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">doc_id</th>
<th style="text-align: left;">modality</th>
<th style="text-align: right;">date</th>
<th style="text-align: right;">token_id</th>
<th style="text-align: left;">word</th>
<th style="text-align: left;">pos</th>
<th style="text-align: right;">num_let</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Sound</td>
<td style="text-align: left;">NNP</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">is</td>
<td style="text-align: left;">VBZ</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">a</td>
<td style="text-align: left;">DT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">vibration</td>
<td style="text-align: left;">NN</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">.</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">Sound</td>
<td style="text-align: left;">NNP</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">travels</td>
<td style="text-align: left;">VBZ</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">as</td>
<td style="text-align: left;">IN</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">a</td>
<td style="text-align: left;">DT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: left;">Writing</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mechanical</td>
<td style="text-align: left;">JJ</td>
<td style="text-align: right;">10</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>We have seven variables listed as headers for each of the columns. We could go one-by-one left-to-right but let’s take another tack. Instead, let’s identify all those variables that cannot be numeric —these are all the non-numeral variables: <code>modality</code>, <code>word</code>, and <code>pos</code>. The question to ask of these variables is whether they represent an order or rank. Since modalities, words, and parts of speech are not ordered values, they are all categorical. Now in relation to <code>doc_id</code>, <code>date</code>, <code>token_id</code>, and <code>num_let</code>. All four are numerals, so they could be numeric. But they could also be numeral representations of categorical or ordinal data. Before we can move forward, we need to make sure we understand what each variable means and how it is measured, or <strong>operationalized</strong> . The variable name and the values can be helpful in this respect. <code>doc_id</code> and <code>token_id</code> are unique identifiers for each document and word. <code>date</code> is what it sounds like, a date, and is operationalized as a year in the Gregorian calendar. And <code>num_let</code> seems quite descriptive as well, number of letters, appearing as a letter count.</p>
<p>With this in mind, let’s return to the question of whether these variables are numeric, ordinal, or categorical. Starting with the trickiest one, <code>date</code>, we can ask the question to identify numeric data: “how much or how many?”. In the case of <code>date</code>, the answer is neither. A date is a point in time, not a quantity. So <code>date</code> is not numeric. But it does provide information about order. Hence, <code>date</code> is ordinal. Next, <code>num_let</code> is numeric because it answers the question “how many?”. Now, <code>doc_id</code> and <code>token_id</code> are both identifiers, so they are not numeric, but the question is whether they encode order as well. In this case, it depends. If the identifiers are assigned in a way that reflects the order of the documents or tokens, then they are ordinal. It is more likely the case that the <code>doc_id</code> is not ordinal, but the <code>token_id</code> is. This is because the <code>token_id</code> is likely assigned in the order the words appear in the document.</p>
<p>Let’s turn to the second semantic value of a tidy dataset. In a tidy dataset, each row is an observation. But an observation of what? This depends on what the unit of observation is. That sounds circular, but its not. The <strong>unit of observation</strong> is simply the primary entity that is being observed or measured <span class="citation" data-cites="Sedgwick2015">(<a href="../references.html#ref-Sedgwick2015" role="doc-biblioref">Sedgwick, 2015</a>)</span>. Even without context, it can often be identified in a dataset by looking at the level of specificity of the variable values and asking what each variable describes. When one variable appears to be the most individualized and other variables appear to describe that variable, then the most individualized variable is likely the unit of observation of the dataset, <em>i.e.</em> the meaning of each observation.</p>
<div class="halfsize callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-lightbulb" aria-label="lightbulb"></i> Consider this</strong></p>
<p>Data can be organized in many ways. It is important to make clear that data in tabular format in itself does not constitute a dataset, in the tidy sense we will be using. Can you think of examples of tabular information that would not be in a tidy format? What would be the implications of this for data analysis?</p>
</div>
</div>
</div>
<p>Applying these strategies to Table <a href="#tbl-data-info-values-masc" class="quarto-xref"><span>2.4</span></a>, we can see that each observation at its core is a word. We see that the values of each observation are the attributes of each word. <code>word</code> is the most individualized variable and the <code>pos</code>, <code>num_let</code>, and <code>token_id</code> all describe the word.</p>
<p>The other variables <code>doc_id</code>, <code>modality</code>, and <code>date</code> are not direct attributes of the word. Instead, they are attributes of the document in which the word appears. Together, however, they all provide information about the word.</p>
<p>As we round out this section on data organization, it is important to stress that the purpose of curation is to represent the corpus data in an informative, tidy format. A curated dataset serves as a reference point making relationships explicit, enabling more efficient querying, and paving the way for further processing before analysis.</p>
</section></section><section id="sec-data-transformation" class="level3"><h3 class="anchored" data-anchor-id="sec-data-transformation">Transformation</h3>
<p>At this point, have introduced the first step towards creating a dataset ready for analysis, data curation. However, a curated dataset is rarely the final organizational step before proceeding to statistical analysis. Many times, if not always, the curated dataset requires <strong>transformation</strong> to derive or generate new data for the dataset. This process may incur row-wise (observation) or column-wise (variable) level changes, as illustrated in <a href="#fig-data-transformations" class="quarto-xref">Figure&nbsp;<span>2.2</span></a>.</p>
<div id="fig-data-transformations" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-data-transformations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<p><span data-fig-alt="Visualization of a table labeled 'row-wise' along the rows and 'column-wise' along the columns to highlight transformation operations on a dataset showing the original dataset in grey and the addition of either columns or rows in darker grey."><img src="figures/data-transformations.drawio.png" class="img-fluid figure-img" style="width:85.0%"></span></p>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-transformations-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.2: Visualization of row-wise and column-wise transformation operations on a dataset
</figcaption></figure>
</div>
<p>The results build on and manipulate the curated dataset to produce a <em>transformed dataset</em>. While there is typically one curated dataset that serves as the base organizational dataset, there may be multiple transformed datasets, each aligning with the informational needs of specific analyses in the research project.</p>
<p>In what follows, we will group common transformation processes into two purpose-based groupings: preparation and enrichment. The process may include one or more of the subsequent transformations but is rarely linear and is most often iterative. The bottom line is, however, to make the dataset more informative and more amenable to the particular aims of a given analysis.</p>
<section id="preparation" class="level4"><h4 class="anchored" data-anchor-id="preparation">Preparation</h4>
<p>The purpose of preparation transformations is to clean, standardize, and derive the key attributes of the dataset on which further processing will depend. Common preparation transformations include text normalization and text tokenization.</p>
<p>Let’s take a toy dataset, in <a href="#tbl-data-text-dataset" class="quarto-xref">Table&nbsp;<span>2.5</span></a>, as a starting point for exploring various transformations. In this dataset, we have three variables, <code>text_id</code>, <code>sent_id</code>, and <code>sentence</code>. It has five observations.</p>
<div class="cell" data-tbl-colwidths="[10,10,80]">
<div id="tbl-data-text-dataset" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[10,10,80]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-text-dataset-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.5: A toy dataset with three variables, <code>text_id</code>, <code>sent_id</code>, and <code>sentence</code>
</figcaption><div aria-describedby="tbl-data-text-dataset-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 80%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">text_id</th>
<th style="text-align: right;">sent_id</th>
<th style="text-align: left;">sentence</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">It’s a beautiful day in the US, and our group decided to visit the famous Grand Canyon.</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">As we reached the destination, Jane said, “I can’t believe we’re finally here!”</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">The breathtaking view left us speechless; indeed, it was a sight to behold.</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">During our trip, we encountered tourists from different countries, sharing stories and laughter.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">For all of us, this experience will be cherished forever.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p><strong>Text normalization</strong> is the process of standardizing text to convert the text into a uniform format and reduce unwanted variation and noise. It is often a preliminary step in data transformation processes which include variables with text.</p>
<p>The normalization we apply will depend on the specific needs of the project, but can include operations such as eliminating missing, redundant, or anomalous observations, changing the case of the text, removing punctuation, standardizing forms, <em>etc.</em> The goal is to reduce the noise in the text and make it more amenable to analysis.</p>
<p>Normalization should be applied with an understanding of how the changes will impact the analysis. For example, looking at <a href="#tbl-data-text-dataset" class="quarto-xref">Table&nbsp;<span>2.5</span></a>, lowercasing can be useful for reducing differences between words that are otherwise identical, yet differ in case due to word position in a sentence (“The” versus “the”). However, lowercasing can also be problematic if the case of the word carries semantic value, such as in the case of “US” (United States) and “us” (first-person plural pronoun). In this case, lowercasing would conflate the two words. Other normalization tasks, and their implications, should be considered in a similar manner.</p>
<p><strong>Text tokenization</strong> involves adapting the text such that it reflects the target linguistic unit that will be used in the analysis. This is a row-wise operation expanding the number of rows, if the linguistic unit is smaller than the original variable, or reducing the number of rows, if the linguistic unit is larger than the original variable.</p>
<p>Text variables can be tokenized at any linguistic level, to the extent we can operationalize the linguistic unit. The operationalized linguistic unit is known as a <strong>term</strong>. For example, terms can be characters, words, sentences, <em>etc</em>. When we refer to the individual units of term, we use the expression <strong>tokens</strong>. Another key term to introduce is <strong>types</strong>, which refers to the unique tokens in a term variable. For example, in sentence 1 in <a href="#tbl-data-text-dataset" class="quarto-xref">Table&nbsp;<span>2.5</span></a>, there are 16 types and 17 tokens —as ‘the’ is repeated. Note that there will always be at least as many tokens as types, but there can be many more tokens than types for any given term variable.</p>
<p>Sequential groupings of characters and words, ngrams, are also common terms used in text analysis. For example, a word bigram is a sequence of two words, and a character trigram is a sequence of three characters.</p>
<div id="tbl-data-tokenization" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-tokenization-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.6: Word and character tokenization examples
</figcaption><div aria-describedby="tbl-data-tokenization-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-data-tokenization" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-data-tokenization-1" class="do-not-create-environment quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure"><figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-data-tokenization-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Character trigram tokenization
</figcaption><div aria-describedby="tbl-data-tokenization-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="do-not-create-environment caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">text_id</th>
<th style="text-align: right;">sent_id</th>
<th style="text-align: left;">trigram</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">its</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">tsa</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">sab</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">abe</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">bea</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">eau</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">aut</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">uti</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">tif</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">ifu</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-data-tokenization" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-data-tokenization-2" class="do-not-create-environment quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure"><figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-data-tokenization-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Word bigram tokenization
</figcaption><div aria-describedby="tbl-data-tokenization-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="do-not-create-environment caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">text_id</th>
<th style="text-align: right;">sent_id</th>
<th style="text-align: left;">bigram</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">it’s a</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">a beautiful</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">beautiful day</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">day in</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">in the</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">the us</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">us and</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">and our</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">our group</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">group decided</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<div class="halfsize callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-file-alt" aria-label="file-alt"></i> Case study</strong></p>
<p><span class="citation" data-cites="Serigos2020">Serigos (<a href="../references.html#ref-Serigos2020" role="doc-biblioref">2020</a>)</span> explores the social stratification of anglicisms in Argentine media. The author presents a method for automatically detecting anglicisms in Spanish texts. In combination with other methods, character ngrams are used to determine the language of a word. The method is based on the observation that the distribution of character ngrams is different between languages.</p>
</div>
</div>
</div>
<p>In <a href="#tbl-data-tokenization" class="quarto-xref">Table&nbsp;<span>2.6</span></a>, we see examples of tokenization at word and character levels. At its core, tokenization is the process which enables the quantitative analysis of text. Choosing the right tokenization level is crucial for the success of the analysis.</p>
</section><section id="enrichment" class="level4"><h4 class="anchored" data-anchor-id="enrichment">Enrichment</h4>
<p>Enrichment transformations are designed to add new attributes to the dataset. These attributes may be derived from the existing attributes or may be integrated from other datasets. Common enrichment transformations include generation, recoding, and integration of observations and/or variables.</p>
<p><strong>Generation</strong> is the process of creating new variables based on implicit information within existing variables. It is a row- and column-wise operation which in text analysis often includes linguistic annotation such as part-of-speech tagging, morphological features, syntactic constituents, <em>etc.</em> These annotations can be used to generate new variables that capture linguistic information that is not explicitly present in the text.</p>
<p>Linguistic annotation can be done manually by linguist coders and/or done automatically using natural language processing (NLP) tools. To illustrate the process of automatic linguistic annotation, we will start with the dataset from <a href="#tbl-data-text-dataset" class="quarto-xref">Table&nbsp;<span>2.5</span></a>. Applying a pre-trained English model <span class="citation" data-cites="Silveira2014">(<a href="../references.html#ref-Silveira2014" role="doc-biblioref">Silveira et al., 2014</a>)</span> from the Universal Dependencies (UD) project <span class="citation" data-cites="DeMarneffe2021">(<a href="../references.html#ref-DeMarneffe2021" role="doc-biblioref">de Marneffe, Manning, Nivre, &amp; Zeman, 2021</a>)</span>, we can generate linguistic annotation for each word in the <code>sentence</code> variable.</p>
<div class="cell" data-tbl-colwidths="[2,13,5,70,10]">
<div id="tbl-data-generate-annotation" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[2,13,5,70,10]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-generate-annotation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.7: Automatic linguistic annotation example
</figcaption><div aria-describedby="tbl-data-generate-annotation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 13%">
<col style="width: 5%">
<col style="width: 70%">
<col style="width: 10%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">id</th>
<th style="text-align: left;">token</th>
<th style="text-align: left;">pos</th>
<th style="text-align: left;">feats</th>
<th style="text-align: left;">relation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">As</td>
<td style="text-align: left;">IN</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">mark</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">we</td>
<td style="text-align: left;">PRP</td>
<td style="text-align: left;">Case=Nom|Number=Plur|Person=1|PronType=Prs</td>
<td style="text-align: left;">nsubj</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">reached</td>
<td style="text-align: left;">VBD</td>
<td style="text-align: left;">Mood=Ind|Tense=Past|VerbForm=Fin</td>
<td style="text-align: left;">advcl</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">the</td>
<td style="text-align: left;">DT</td>
<td style="text-align: left;">Definite=Def|PronType=Art</td>
<td style="text-align: left;">det</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">destination</td>
<td style="text-align: left;">NN</td>
<td style="text-align: left;">Number=Sing</td>
<td style="text-align: left;">obj</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">,</td>
<td style="text-align: left;">,</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">punct</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">Jane</td>
<td style="text-align: left;">NNP</td>
<td style="text-align: left;">Number=Sing</td>
<td style="text-align: left;">nsubj</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">said</td>
<td style="text-align: left;">VBD</td>
<td style="text-align: left;">Mood=Ind|Tense=Past|VerbForm=Fin</td>
<td style="text-align: left;">root</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">,</td>
<td style="text-align: left;">,</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">punct</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">”</td>
<td style="text-align: left;">``</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">punct</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11</td>
<td style="text-align: left;">I</td>
<td style="text-align: left;">PRP</td>
<td style="text-align: left;">Case=Nom|Number=Sing|Person=1|PronType=Prs</td>
<td style="text-align: left;">nsubj</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: left;">ca</td>
<td style="text-align: left;">MD</td>
<td style="text-align: left;">VerbForm=Fin</td>
<td style="text-align: left;">aux</td>
</tr>
<tr class="odd">
<td style="text-align: left;">13</td>
<td style="text-align: left;">n’t</td>
<td style="text-align: left;">RB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">advmod</td>
</tr>
<tr class="even">
<td style="text-align: left;">14</td>
<td style="text-align: left;">believe</td>
<td style="text-align: left;">VB</td>
<td style="text-align: left;">VerbForm=Inf</td>
<td style="text-align: left;">ccomp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">15</td>
<td style="text-align: left;">we</td>
<td style="text-align: left;">PRP</td>
<td style="text-align: left;">Case=Nom|Number=Plur|Person=1|PronType=Prs</td>
<td style="text-align: left;">nsubj</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: left;">’re</td>
<td style="text-align: left;">VBP</td>
<td style="text-align: left;">Mood=Ind|Tense=Pres|VerbForm=Fin</td>
<td style="text-align: left;">cop</td>
</tr>
<tr class="odd">
<td style="text-align: left;">17</td>
<td style="text-align: left;">finally</td>
<td style="text-align: left;">RB</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">advmod</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">here</td>
<td style="text-align: left;">RB</td>
<td style="text-align: left;">PronType=Dem</td>
<td style="text-align: left;">ccomp</td>
</tr>
<tr class="odd">
<td style="text-align: left;">19</td>
<td style="text-align: left;">!</td>
<td style="text-align: left;">.</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">punct</td>
</tr>
<tr class="even">
<td style="text-align: left;">20</td>
<td style="text-align: left;">”</td>
<td style="text-align: left;">’’</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">punct</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>The annotated dataset in <a href="#tbl-data-generate-annotation" class="quarto-xref">Table&nbsp;<span>2.7</span></a> is now tokenized by word and includes the key variables <code>pos</code> (<a href="https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html">Penn treebank tagset</a>), <code>feats</code> (morphological features), and <code>relation</code> (dependency relations). These variables provide information about the grammatical category and syntactic structure of each word in the sentence. The results of this process enables more direct access during analysis to features that were hidden or otherwise difficult to access.</p>
<div class="halfsize callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-solid fa-exclamation-triangle" aria-label="exclamation-triangle"></i> Warning</strong></p>
<p>Automated linguistic annotation can offer rapid access to abundant and highly dependable linguistic data for numerous languages. However, linguistic annotation tools are not infallible. They are tools developed by training computational algorithms to identify patterns in previously annotated and verified datasets, resulting in a language model. This model is then employed to predict linguistic annotations for new language data. The accuracy of the linguistic annotation heavily relies on the congruence between the language sampling frame of the trained data and that of the dataset to be automatically annotated.</p>
</div>
</div>
</div>
<p><strong>Recoding</strong> is the process of transforming the values of one or more variables into new values which are more amenable to analysis. This is a column-wise operation which is used to make explicit information more accessible. Typical operations include extraction, reclassification, and calculation.</p>
<p>In terms of <strong>extraction</strong>, the goal is to distill relevant information from existing variables. For example, extracting the year from a date variable, or extracting the first name from a full name variable. In text analysis, extraction is often used to extract information from text variables. Say we have a dataset with a variable containing conversation utterances. We may want to extract some characteristic from those utterances and capture their occurrence in a new variable.</p>
<p><strong>Reclassification</strong> aims to simplify complex variables, making it easier to identify patterns and trends relevant for the research question. For example, the surface forms of words can be reduced to their stemmed or lemmatized forms. <strong>Stemming</strong> is the process of reducing inflected words to their word stem, base, or root form. <strong>Lemmatization</strong> is the process of reducing inflected words to their dictionary form, or lemma.</p>
<p>In <a href="#tbl-data-recode-categorical-lemma" class="quarto-xref">Table&nbsp;<span>2.8</span></a>, we see an example of recoding surface forms of words to their stemmed and lemmatized forms.</p>
<div class="cell" data-tbl-colwidths="[20,20,20,20,20]">
<div id="tbl-data-recode-categorical-lemma" class="cell quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[20,20,20,20,20]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-recode-categorical-lemma-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.8: Reclassification of surface forms of words to their stemmed and lemmatized forms
</figcaption><div aria-describedby="tbl-data-recode-categorical-lemma-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">text_id</th>
<th style="text-align: right;">sent_id</th>
<th style="text-align: left;">word</th>
<th style="text-align: left;">stem</th>
<th style="text-align: left;">lemma</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">as</td>
<td style="text-align: left;">a</td>
<td style="text-align: left;">as</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">we</td>
<td style="text-align: left;">we</td>
<td style="text-align: left;">we</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">reached</td>
<td style="text-align: left;">reach</td>
<td style="text-align: left;">reach</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">the</td>
<td style="text-align: left;">the</td>
<td style="text-align: left;">the</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">destination</td>
<td style="text-align: left;">destin</td>
<td style="text-align: left;">destination</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">jane</td>
<td style="text-align: left;">jane</td>
<td style="text-align: left;">jane</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">said</td>
<td style="text-align: left;">said</td>
<td style="text-align: left;">say</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">i</td>
<td style="text-align: left;">i</td>
<td style="text-align: left;">i</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">can</td>
<td style="text-align: left;">can</td>
<td style="text-align: left;">can</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">not</td>
<td style="text-align: left;">not</td>
<td style="text-align: left;">not</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">believe</td>
<td style="text-align: left;">believ</td>
<td style="text-align: left;">believe</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">we</td>
<td style="text-align: left;">we</td>
<td style="text-align: left;">we</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">are</td>
<td style="text-align: left;">are</td>
<td style="text-align: left;">be</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">finally</td>
<td style="text-align: left;">final</td>
<td style="text-align: left;">finally</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">here</td>
<td style="text-align: left;">here</td>
<td style="text-align: left;">here</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div class="halfsize callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-file-alt" aria-label="file-alt"></i> Case study</strong></p>
<p>Inflectional family size is the number of inflectional forms for a given word and can be calculated from a corpus by counting the number of surface forms for each lemma in the corpus <span class="citation" data-cites="Kostic2003">(<a href="../references.html#ref-Kostic2003" role="doc-biblioref">Kostić, Marković, &amp; Baucal, 2003</a>)</span>. <span class="citation" data-cites="Baayen2006">Baayen, Feldman, &amp; Schreuder (<a href="../references.html#ref-Baayen2006" role="doc-biblioref">2006</a>)</span> found that words with larger inflectional family size are associated with faster word recognition times in lexical processing tasks.</p>
</div>
</div>
</div>
<p>Reclassification transformations can be useful for simplifying complex variables, making it easier to identify patterns, as we see in <a href="#tbl-data-recode-categorical-lemma" class="quarto-xref">Table&nbsp;<span>2.8</span></a>. However, it is important to consider the trade-offs of reclassification and to ensure that the result aligns with the research question. For example, reclassifying a numeric variable to a categorical variable or a categorical variable into a variable with fewer levels variable can lead to loss of information about the original levels <span class="citation" data-cites="Baayen2010">(<a href="../references.html#ref-Baayen2010" role="doc-biblioref">Baayen, 2010</a>)</span>.</p>
<p><strong>Calculations</strong> of measures can also be seen as a recoding operation. In text analysis, measures are often used to describe the properties of a document or linguistic unit. For example, the number of words in a corpus document, the lengths of sentences, the number of clauses in a sentence, <em>etc.</em> In turn, these measures can be used to calculate other measures, such as lexical diversity or syntactic complexity measures. The end result makes the dataset more informative and amenable to analysis.</p>
<p><strong>Integration</strong> is a transformation step which can be row-wise or column-wise. Row-wise integration is the process of combining datasets by appending observations from one dataset to another. Column-wise integration is the process of combining datasets by appending variables from one dataset to another.</p>
<p>To integrate in row-wise manner, the datasets involved in the process must have the same variables and variable types. This process is often referred to as <strong>concatenating datasets</strong>, and is visualized in <a href="#fig-concatenating" class="quarto-xref">Figure&nbsp;<span>2.3 (a)</span></a>. It can be thought of as stacking datasets on top of each other to create a larger dataset. Remember, having the same variables and variable types is not the same has having the same values.</p>
<p>Take, for example, a case when a corpus resource contains data for two populations. In the course of curating and transforming the datasets, it may make more sense to work with the datasets separately. However, when it comes time to analyze the data, it may be more convenient to work with the datasets as a single dataset. In this case, the datasets can be concatenated to create a single dataset.</p>
<div id="fig-data-integration" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-data-integration-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row quarto-layout-valign-bottom">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-data-integration" style="flex-basis: 40.0%;justify-content: flex-start;">
<div id="fig-concatenating" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Two tables with three rows and three columns. The columns are labeled 'A', 'B', and 'C'. There is a vertical line with arrow ends suggesting combining the two tables into one table.">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-concatenating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/integration-concat-visual.drawio.png" class="img-fluid figure-img" style="width:70.0%" data-ref-parent="fig-data-integration" alt="Two tables with three rows and three columns. The columns are labeled 'A', 'B', and 'C'. There is a vertical line with arrow ends suggesting combining the two tables into one table.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-concatenating-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Concatenating
</figcaption></figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 5.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-data-integration" style="flex-basis: 55.0%;justify-content: flex-start;">
<div id="fig-joining" class="quarto-float quarto-figure quarto-figure-center anchored" alt="Two tables with three rows and three columns. The columns of the first table are labeled 'A', 'B', and 'C'. The columns of the second table are labeled 'C', 'D', and 'E'. There is a horizontal line with arrow ends suggesting combining the two tables into one table based on the common column 'C'.">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-joining-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/integration-join-visual.drawio.png" class="img-fluid figure-img" style="width:75.0%" data-ref-parent="fig-data-integration" alt="Two tables with three rows and three columns. The columns of the first table are labeled 'A', 'B', and 'C'. The columns of the second table are labeled 'C', 'D', and 'E'. There is a horizontal line with arrow ends suggesting combining the two tables into one table based on the common column 'C'.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-joining-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Joining
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-integration-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.3: Visual summary of row-wise and column-wise integration operations on datasets
</figcaption></figure>
</div>
<p>Integrating datasets can be performed in a column-wise manner as well. In this process, the datasets need not have the exact same variables and variable types, rather it is required that the datasets share a common variable of the same informational type that can be used to index the datasets. This process is often referred to as <strong>joining datasets</strong> and is visualized in <a href="#fig-joining" class="quarto-xref">Figure&nbsp;<span>2.3 (b)</span></a>.</p>
<p>Corpus resources often include metadata in stand-off annotation format. That is, the metadata is not embedded in the corpus files, but rather is stored in a separate file. The metadata and corpus files will share a common variable which can be used to join the metadata with the corpus files, in turn creating a more informative dataset.</p>
</section></section></section><section id="sec-data-documentation" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="sec-data-documentation">
<span class="header-section-number">2.3</span> Documentation</h2>
<p>As we have seen in this chapter, acquiring corpus data and converting that data into information involves a number of conscious decisions and implementation steps. As a favor to ourselves, as researchers, and to the research community, it is crucial to document these decisions and steps. Documentation includes a data origin file for the acquired corpus data, data dictionaries for the curated and transformed datasets, and well-documented code for the processing steps.</p>
<section id="sec-data-data-origin" class="level3"><h3 class="anchored" data-anchor-id="sec-data-data-origin">Data origin</h3>
<p>Data acquired from corpus resources should be accompanied by information about the <strong>data origin</strong>. <a href="#tbl-data-data-origin" class="quarto-xref">Table&nbsp;<span>2.9</span></a> provides the types of information that should be included in the data origin file.</p>
<div id="tbl-data-data-origin" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[30, 70]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-data-origin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.9: Data origin information
</figcaption><div aria-describedby="tbl-data-data-origin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 70%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Information</th>
<th style="text-align: left;">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Resource name</td>
<td style="text-align: left;">Name of the corpus resource.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data source</td>
<td style="text-align: left;">URL, DOI, <em>etc.</em>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Data sampling frame</td>
<td style="text-align: left;">Language, language variety, modality, genre, <em>etc.</em>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data collection date(s)</td>
<td style="text-align: left;">The date or date range of the data collection.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Data format</td>
<td style="text-align: left;">Plain text, XML, HTML, <em>etc.</em>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data schema</td>
<td style="text-align: left;">Relationships between data elements: files, folders, <em>etc.</em>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">License</td>
<td style="text-align: left;">CC BY, CC BY-NC, <em>etc.</em>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">Attribution</td>
<td style="text-align: left;">Citation information for the data source.</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>For many corpus resources, the corpus documentation will include all or most of this information as part of the resource download or documented online. If this information is not present in the corpus resource or you compile your own, it is important to document this information yourself. This information can be documented in a file, usually in a tabular plain text file, such as a comma-separated values (CSV) or spreadsheet file , for example an Microsoft Excel <em>.xlsx</em> file, that is included with the corpus resource.</p>
</section><section id="sec-data-data-dictionaries" class="level3"><h3 class="anchored" data-anchor-id="sec-data-data-dictionaries">Data dictionaries</h3>
<p>The process of organizing the data into a dataset, curation, and modifications to the dataset in preparation for analysis, transformation, each include a number of project-specific decisions. These decisions should be documented.</p>
<p>On the one hand, each dataset that is created should have a <strong>data dictionary</strong> file. A data dictionary is a document that describes the variables in a dataset including the information in <a href="#tbl-data-data-dictionary" class="quarto-xref">Table&nbsp;<span>2.10</span></a>. Organizing this information in a tabular format, such as a CSV file or spreadsheet, can make it easy for others to read and understand your data dictionary.</p>
<p>On the other hand, the data curation and transformation steps should be documented in the code that is used to create the dataset. This is one of the valuable features of a programmatic approach to quantitative research. The transparency of this documentation is enhanced by using <strong>literate programming</strong> strategies to intermingling prose descriptions and code the steps in the same, reproducible document.</p>
<div id="tbl-data-data-dictionary" class="quarto-float quarto-figure quarto-figure-center anchored" data-tbl-colwidths="[20, 80]">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-data-data-dictionary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.10: Data dictionary information
</figcaption><div aria-describedby="tbl-data-data-dictionary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 80%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Information</th>
<th style="text-align: left;">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Variable name</td>
<td style="text-align: left;">The name of the variable as it appears in the dataset, <em>e.g.</em> <code>participant_id</code>, <code>modality</code>, <em>etc.</em>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">Readable name</td>
<td style="text-align: left;">A human-readable name for the variable, <em>e.g.</em> ‘Participant ID’, ‘Language modality’, <em>etc.</em>
</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Variable type</td>
<td style="text-align: left;">The type of information that the variable contains, <em>e.g.</em> ‘categorical’, ‘ordinal’, <em>etc.</em>
</td>
</tr>
<tr class="even">
<td style="text-align: left;">Variable description</td>
<td style="text-align: left;">A prose description expanding on the readable name and can include measurement units, allowed values, <em>etc.</em>
</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>By providing a comprehensive data dictionary and using a programmatic approach to data curation and transformation, you ensure that you can retrace your own steps and others can easily understand and work with your dataset.</p>
<div class="halfsize callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-hand-point-up" aria-label="hand-point-up"></i> Tip</strong></p>
<p>It is conventional to work with variable names for datasets in R using the same conventions that are used for naming objects. It is a matter of taste which convention is used. I have adopted ‘snake_case’ as my personal preference (<em>e.g</em> <code>token_id</code>). There are also alternatives such as ‘camelCase’ (<em>e.g.</em> <code>tokenId</code>) and ‘PascalCase’ (<em>e.g.</em> <code>TokenId</code>). Regardless of the convention you choose, it is good practice to be consistent.</p>
<p>It is also of note that the variable names should be balanced for meaningfulness and brevity. This brevity is of practical concern but can lead to somewhat opaque variable names. Ensure you provide a description of your variables in a data dictionary.</p>
</div>
</div>
</div>
</section></section><section id="activities" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="activities">Activities</h2>
<p>In the following activities, we will be tackle a common scenario in data analysis: to read, to inspect, and to write datasets. The recipe will discuss the necessary packages and functions to accomplish these tasks including {readr} and {dplyr}. The recipe will also refresh and expand on the elements of code blocks in Quarto documents such as the <code>label</code>, <code>echo</code>, <code>message</code>, and <code>include</code> options.</p>
<div style="page-break-after: always;"></div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-regular fa-file-code" aria-label="file-code"></i> Recipe</strong></p>
<p><strong>What</strong>: Reading, inspecting, and writing datasets<br><strong>How</strong>: Read Recipe 2, complete comprehension check, and prepare for Lab 2.<br><strong>Why</strong>: To use literate programming in Quarto to work with R coding strategies for reading, inspecting, and writing datasets.</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong><i class="fa-solid fa-flask" aria-label="flask"></i> Lab</strong></p>
<p><strong>What</strong>: Dive into datasets<br><strong>How</strong>: Clone, fork, and complete the steps in Lab 2.<br><strong>Why</strong>: To read datasets from packages and from plain-text files, inspect and report characteristics of datasets, and write datasets to plain-text files.</p>
</div>
</div>
</div>
</section><section id="summary" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="summary">Summary</h2>
<p>In this chapter we have focused on data and information —the first two components of DIKI Hierarchy. First, a distinction is made between populations and samples, the latter being a intentional and subjective selection of observations from the world which attempt to represent the population of interest. The result of this process is known as a corpus. Whether developing a corpus or selecting an existing corpus, it is important to vet the sampling frame for its applicability and viability as a resource for a given research project.</p>
<p>Once a viable corpus is identified, then that corpus is converted into a curated dataset which adopts the tidy dataset format where each column is a variable, each row is an observation, and the intersection of columns and rows contain values. This curated dataset serves to establish the base informational relationships from which your research will stem.</p>
<p>The curated dataset will most likely require transformations which may include normalization, tokenization, recoding, generation, and/or integration to enhance the usefulness of the information to analysis. A transformed dataset or set of datasets will the result from this process.</p>
<p>Finally, documentation should be implemented at the acquisition, curation, and transformation stages of the analysis project process. The combination of data origin, data dictionary, and literate programming files establishes documentation of the data and implementation steps to ensure transparent and reproducible research.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-Ackoff1989" class="csl-entry" role="listitem">
Ackoff, R. L. (1989). From data to wisdom. <em>Journal of Applied Systems Analysis</em>, <em>16</em>(1), 3–9.
</div>
<div id="ref-Adel2020" class="csl-entry" role="listitem">
Ädel, A. (2020). Corpus compilation. In M. Paquot &amp; S. Th. Gries (Eds.), <em>A <span>Practical Handbook</span> of <span>Corpus Linguistics</span></em> (pp. 3–24). Switzerland: Springer.
</div>
<div id="ref-Baayen2010" class="csl-entry" role="listitem">
Baayen, R. H. (2010). A real experiment is a factorial experiment? <em>The Mental Lexicon</em>, <em>5</em>(1), 149–157. doi:<a href="https://doi.org/10.1075/ml.5.1.06baa">10.1075/ml.5.1.06baa</a>
</div>
<div id="ref-Baayen2006" class="csl-entry" role="listitem">
Baayen, R. H., Feldman, L., &amp; Schreuder, R. (2006). Morphological influences on the recognition of monosyllabic monomorphemic words. <em>Journal of Memory and Language</em>, <em>55</em>, 290–313. doi:<a href="https://doi.org/10.1016/j.jml.2006.03.008">10.1016/j.jml.2006.03.008</a>
</div>
<div id="ref-DeMarneffe2021" class="csl-entry" role="listitem">
de Marneffe, M.-C., Manning, C. D., Nivre, J., &amp; Zeman, D. (2021). Universal dependencies. <em>Computational Linguistics</em>, <em>47</em>(2), 255–308. doi:<a href="https://doi.org/10.1162/coli_a_00402">10.1162/coli_a_00402</a>
</div>
<div id="ref-DuBois2005" class="csl-entry" role="listitem">
Du Bois, J. W., Chafe, W. L., Meyer, C., Thompson, S. A., Englebretson, R., &amp; Martey, N. (2005). Santa <span>Barbara Corpus</span> of <span>Spoken American English</span>, parts 1-4. Philadelphia: Linguistic Data Consortium. Retrieved from <a href="https://www.linguistics.ucsb.edu/research/santa-barbara-corpus">https://www.linguistics.ucsb.edu/research/santa-barbara-corpus</a>
</div>
<div id="ref-Gries2021a" class="csl-entry" role="listitem">
Gries, S. Th. (2021). <em>Statistics for linguistics with <span>R</span></em>. De Gruyter Mouton.
</div>
<div id="ref-Ide2008" class="csl-entry" role="listitem">
Ide, N., Baker, C., Fellbaum, C., Fillmore, C., &amp; Passonneau, R. (2008). <span>MASC</span>: <span>The Manually Annotated Sub-Corpus</span> of <span>American English</span>. In <em>Sixth <span>International Conference</span> on <span>Language Resources</span> and <span>Evaluation</span>, <span>LREC</span> 2008</em> (pp. 2455–2460). European Language Resources Association (ELRA).
</div>
<div id="ref-Ide2001" class="csl-entry" role="listitem">
Ide, N., &amp; Macleod, C. (2001). The <span>American National Corpus</span>: A standardized resource for <span>American English</span>. In <em>Proceedings of <span>Corpus Linguistics</span></em>. Lancaster, UK.
</div>
<div id="ref-Kostic2003" class="csl-entry" role="listitem">
Kostić, A., Marković, T., &amp; Baucal, A. (2003). Inflectional morphology and word meaning: <span>Orthogonal</span> or co-implicative cognitive domains? In R. H. Baayen &amp; R. Schreuder (Eds.), <em>Morphological <span>Structure</span> in <span>Language Processing</span></em> (pp. 1–44). De Gruyter Mouton. doi:<a href="https://doi.org/10.1515/9783110910186.1">10.1515/9783110910186.1</a>
</div>
<div id="ref-Kucera1967" class="csl-entry" role="listitem">
Kucera, H., &amp; Francis, W. N. (1967). <em>Computational analysis of present day <span>American English</span></em>. Brown University Press Providence.
</div>
<div id="ref-Rowley2007" class="csl-entry" role="listitem">
Rowley, J. (2007). The wisdom hierarchy: <span>Representations</span> of the <span>DIKW</span> hierarchy. <em>Journal of Information Science</em>, <em>33</em>(2), 163–180. doi:<a href="https://doi.org/10.1177/0165551506070706">10.1177/0165551506070706</a>
</div>
<div id="ref-Sedgwick2015" class="csl-entry" role="listitem">
Sedgwick, P. (2015). Units of sampling, observation, and analysis. <em>BMJ (online)</em>, <em>351</em>, h5396. doi:<a href="https://doi.org/10.1136/bmj.h5396">10.1136/bmj.h5396</a>
</div>
<div id="ref-Serigos2020" class="csl-entry" role="listitem">
Serigos, J. (2020). Using automated methods to explore the social stratification of anglicisms in <span>Spanish</span>. <em>Corpus Linguistics and Linguistic Theory</em>, <em>0</em>(0), 000010151520190052. doi:<a href="https://doi.org/10.1515/cllt-2019-0052">10.1515/cllt-2019-0052</a>
</div>
<div id="ref-Silveira2014" class="csl-entry" role="listitem">
Silveira, N., Dozat, T., de Marneffe, M.-C., Bowman, S., Connor, M., Bauer, J., &amp; Manning, C. D. (2014). A gold standard dependency corpus for <span>English</span>. In <em>Proceedings of the ninth international conference on language resources and evaluation (<span>LREC-2014</span>)</em>.
</div>
<div id="ref-SWDA2008" class="csl-entry" role="listitem">
University of Colorado Boulder. (2008). Switchboard <span>Dialog Act Corpus</span>. <span>Web</span> download. Linguistic Data Consortium. Retrieved from <a href="https://catalog.ldc.upenn.edu/docs/LDC97S62/">https://catalog.ldc.upenn.edu/docs/LDC97S62/</a>
</div>
<div id="ref-Wickham2014a" class="csl-entry" role="listitem">
Wickham, H. (2014). <em>Advanced <span>R</span></em>. CRC Press.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../part_2/index.html" class="pagination-link" aria-label="Foundations">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Foundations</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../part_2/3_analysis.html" class="pagination-link" aria-label="Analysis">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/qtalr/book/blob/main/part_2/2_data.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/qtalr/book/edit/main/part_2/2_data.qmd" target="_blank" class="toc-action"><i class="bi empty"></i>Edit this page</a></li><li><a href="https://github.com/qtalr/book/issues" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>